def gv
def TIME_OUT = params.TIMER.toInteger()
pipeline {
  agent any
  parameters {
    string description: 'Timer to stop the job', name: 'TIMER', trim: true
    string defaultValue: '5', description: 'Time interval to check target endpoint\'s availability', name: 'TIME_INTERVAL', trim: true
    string description: 'List of target endpoints to monitor status', name: 'ENDPOINT', trim: true
  }
  stages {
  
    stage("init") {
  options {
     timeout(time: TIME_OUT, unit: 'MINUTES') 
            }
      steps {
        script {
          gv=load "splitparameter.groovy"
      }
      echo "${TIME_INTERVAL}"
      }
     }
     
     stage("Split parameter"){
     parallel {
     stage ('check parallel') {
     steps {
      script {
          gv.splitparams();
          }
          }
     }
     }
     }
     
  }
}
