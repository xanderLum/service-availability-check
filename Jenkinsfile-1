pipeline {
  agent any
  parameters {
  booleanParam description: 'is this a debug build?', name: 'DEBUG_BUILD'
}
  environment {
    NEW_VERSION='1.3.0'
  }
  stages {
    stage ('build') {
      steps {
        echo 'building the job...'
        echo "building version ${NEW_VERSION}"
        echo "Debug Build : ${params.DEBUG_BUILD}"
      }
    }
     stage ('test') {
      when {
        expression {
          NEW_VERSION == '1.2.1'
        }
      }
      steps {
        echo 'testing the job...'
      }
    }
     stage ('deploy') {
      steps {
        echo 'deplying the job...'
      }
    }
  }
}
